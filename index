@@ -3,7 +3,6 @@
function getDataSaoPauloMais(dias) {
  const agora = new Date();

  // "2025-11-13, 18:23:45" no fuso America/Sao_Paulo
  const spString = agora.toLocaleString('en-CA', {
    timeZone: 'America/Sao_Paulo',
    year: 'numeric',
@@ -18,7 +17,6 @@
  const [dataParte] = spString.split(','); // "YYYY-MM-DD"
  const [ano, mes, dia] = dataParte.split('-').map(Number);

  // Cria uma data só com ano/mes/dia e soma os dias
  const spDate = new Date(ano, mes - 1, dia + dias);

  const y = spDate.getFullYear();
@@ -31,13 +29,21 @@
// Data de hoje em UTC-3 + 2 dias
const { ymd: data } = getDataSaoPauloMais(2);

// Horário fixo: 08:00–09:00 em UTC-3
// Em UTC isso é 11:00–12:00 → por isso o "Z" com 110000Z e 120000Z
// Horário fixo: 08:00–09:00 em UTC-3 → 11:00–12:00 UTC
const inicioUTC = `${data}T110000Z`;
const fimUTC    = `${data}T120000Z`;

// Link do Google Calendar (bom pra Android / desktop)
const googleURL = `https://calendar.google.com/calendar/u/0/r/eventedit?text=Agendamento&dates=${inicioUTC}/${fimUTC}&details=Agendamento+automático`;
// Dados do evento
const titulo   = encodeURIComponent('Agendamento');
const detalhes = encodeURIComponent('Agendamento automático');

// URL web padrão do Google Calendar (fallback)
const googleURL = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${titulo}&dates=${inicioUTC}%2F${fimUTC}&details=${detalhes}`;

// Intent URL para tentar abrir o app do Google Calendar no Android (via Chrome)
const googleIntentURL =
  `intent://calendar.google.com/calendar/render?action=TEMPLATE&text=${titulo}&dates=${inicioUTC}%2F${fimUTC}&details=${detalhes}` +
  `#Intent;scheme=https;package=com.google.android.calendar;end`;

// Gera um .ics (bom pra iOS / Apple Calendar / Outlook)
function gerarICS() {
@@ -59,13 +65,17 @@
const ua = navigator.userAgent;
const isAndroid = /Android/i.test(ua);
const isIOS = /iPhone|iPad|iPod/i.test(ua);
const isChrome = /Chrome/i.test(ua);

// Decide o melhor destino
if (isIOS) {
  // iPhone / iPad → abre arquivo .ics (Apple Calendar)
  window.location.href = gerarICS();
} else if (isAndroid && isChrome) {
  // Android + Chrome → tenta abrir o app via intent://
  window.location.href = googleIntentURL;
} else {
  // Android e desktop → Google Calendar
  // Fallback: abre Google Calendar no navegador
  window.location.href = googleURL;
}
</script>
