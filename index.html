<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Abrir Calendário</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Evita cache -->
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="expires" content="0">
</head>

<body>

<script>
  function getDataSaoPauloMais(dias) {
    const agora = new Date();

    const spString = agora.toLocaleString('en-CA', {
      timeZone: 'America/Sao_Paulo',
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour12: false
    });

    const [dataParte] = spString.split(',');
    const [ano, mes, dia] = dataParte.split('-').map(Number);

    const spDate = new Date(ano, mes - 1, dia + dias);

    const y = spDate.getFullYear();
    const m = String(spDate.getMonth() + 1).padStart(2, '0');
    const d = String(spDate.getDate()).padStart(2, '0');

    return `${y}${m}${d}`;
  }

  // Hoje + 2 dias
  const data = getDataSaoPauloMais(5);

  // 08:00–09:00 BRT = 11:00–12:00 UTC
  const inicioUTC = `${data}T110000Z`;
  const fimUTC = `${data}T120000Z`;

  // ÚNICO link que pode abrir o app fora do RBM
  const calendarURL =
    `https://www.google.com/calendar/render` +
    `?action=TEMPLATE` +
    `&text=Bradesco | Lembrete de Parcela` +
    `&details=Evite a quebra do seu acordo realizando o pagamento no prazo.` +
    `&dates=${inicioUTC}/${fimUTC}` + 
    `&trp=true`;

   // Tentativa direta (sem fallback)
  window.location.replace(calendarURL);
</script>

</body>
</html>
